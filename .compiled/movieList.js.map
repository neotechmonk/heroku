{"version":3,"sources":["../src/movieList.js"],"names":["http","require","getMovies","server","createServer","req","res","console","log","url","movies","writeHead","i","length","id","title","JSON","stringify","end","listen","process","env","PORT"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,YAAYD,QAAQ,SAAR,CAAhB,C,CAAoC;;AAEpC;AACA,IAAME,SAASH,KAAKI,YAAL,CAAkB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7CC,UAAQC,GAAR,CAAY,qBAAqBH,IAAII,GAArC;AACA,MAAIC,SAAS,IAAb;;AAEA;AACA,MAAIL,IAAII,GAAJ,KAAY,SAAhB,EAA2B;AACzBH,QAAIK,SAAJ,CAAc,GAAd,EAAmB,EAAE,gBAAgB,kBAAlB,EAAnB;;AAEAT,cAAU,UAASQ,MAAT,EAAiB;AACzB,WAAKE,IAAI,CAAT,EAAYA,IAAIF,OAAOG,MAAvB,EAA+BD,GAA/B,EAAoC;AAClCL,gBAAQC,GAAR,CACE,cACGI,IAAI,CADP,IAEE,OAFF,GAGEF,OAAOE,CAAP,EAAUE,EAHZ,GAIE,UAJF,GAKEJ,OAAOE,CAAP,EAAUG,KANd;AAQD;AACD;AACAL,eAASM,KAAKC,SAAL,CAAeP,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAT;AACA;AACAJ,UAAIY,GAAJ,CAAQR,MAAR;AACD,KAfD;AAgBD;AACF,CAzBc,CAAf;AA0BAP,OAAOgB,MAAP,CAAcC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAlC","file":"movieList.js","sourcesContent":["//@Theepan Thevathasasn\r\n//Created : 03-10-2018\r\n//Last updated : 03-10-2018\r\n\r\n// **Send movie list as json**\r\n// 1. Process request type - all movies or filtered\r\n// 1. Compose Data\r\n// 2. Compose JSON\r\n// 3. Return JSON\r\n\r\nvar http = require(\"http\");\r\nvar getMovies = require(\"./movie\"); //contains function to return movie objects\r\n\r\n//Reqest and Response Handler\r\nconst server = http.createServer((req, res) => {\r\n  console.log(\"request made at \" + req.url);\r\n  let movies = null;\r\n\r\n  //routing to request all movies\r\n  if (req.url === \"/movies\") {\r\n    res.writeHead(200, { \"Content-Type\": \"application/json\" });\r\n\r\n    getMovies(function(movies) {\r\n      for (i = 0; i < movies.length; i++) {\r\n        console.log(\r\n          \"movie #:\" +\r\n            (i + 1) +\r\n            \" ID: \" +\r\n            movies[i].id +\r\n            \" Title: \" +\r\n            movies[i].title\r\n        );\r\n      }\r\n      //Assign JSON object as string\r\n      movies = JSON.stringify(movies, null, 4);\r\n      //send json as string\r\n      res.end(movies);\r\n    });\r\n  }\r\n});\r\nserver.listen(process.env.PORT || 5000);\r\n"]}