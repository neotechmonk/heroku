{"version":3,"sources":["../src/movieList.js"],"names":["server","req","res","console","log","url","movies","setHeader","writeHead","forEach","indexOf","movie","id","title","JSON","stringify","end","listen","process","env","PORT"],"mappings":";;AAKA;;AACA;;;;;;AAAiC;;AAEjC;AARA;AACA;AACA;;AAEA;AAKA,IAAMA,SAAS,wBAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACxCC,UAAQC,GAAR,CAAY,qBAAqBH,IAAII,GAArC;AACA,MAAIC,SAAS,IAAb;;AAEA;AACA,MAAIL,IAAII,GAAJ,KAAY,SAAhB,EAA2B;AACzBH,QAAIK,SAAJ,CAAc,6BAAd,EAA6C,GAA7C;AACAL,QAAIK,SAAJ,CAAc,8BAAd,EAA8C,CAC5C,gDAD4C,CAA9C;AAGAL,QAAIM,SAAJ,CAAc,GAAd,EAAmB,EAAE,gBAAgB,kBAAlB,EAAnB;AACA;;AAEA,yBAAU,UAASF,MAAT,EAAiB;AACzBA,aAAOG,OAAP,CAAe,iBAAS;AACtBN,gBAAQC,GAAR,gBACcE,OAAOI,OAAP,CAAeC,KAAf,IAAwB,CADtC,aAC8CA,MAAMC,EADpD,gBAEID,MAAME,KAFV;AAKD,OAND;;AAQA;AACAP,eAASQ,KAAKC,SAAL,CAAeT,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAT;AACA;AACAJ,UAAIc,GAAJ,CAAQV,MAAR;AACD,KAbD;AAcD;AACF,CA5Bc,CAAf;AA6BAN,OAAOiB,MAAP,CAAcC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAlC","file":"movieList.js","sourcesContent":["//@Theepan Thevathasasn\r\n//Created : 03-10-2018\r\n//Last updated : 03-10-2018\r\n\r\n// **Send movie list as json**\r\nimport { createServer } from \"http\";\r\nimport getMovies from \"./movie\"; //contains function to return movie objects\r\n\r\n//Reqest and Response Handler\r\nconst server = createServer((req, res) => {\r\n  console.log(\"request made at \" + req.url);\r\n  let movies = null;\r\n\r\n  //routing to request all movies\r\n  if (req.url === \"/movies\") {\r\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\r\n    res.setHeader(\"Access-Control-Allow-Headers\", [\r\n      \"Origin, X-Requested-With, Content-Type, Accept\"\r\n    ]);\r\n    res.writeHead(200, { \"Content-Type\": \"application/json\" });\r\n    //console.log(res.getHeaders());\r\n\r\n    getMovies(function(movies) {\r\n      movies.forEach(movie => {\r\n        console.log(\r\n          `movie #: ${movies.indexOf(movie) + 1} ID:${movie.id} Title: ${\r\n            movie.title\r\n          }`\r\n        );\r\n      });\r\n\r\n      //Assign JSON object as string\r\n      movies = JSON.stringify(movies, null, 4);\r\n      //send json as string\r\n      res.end(movies);\r\n    });\r\n  }\r\n});\r\nserver.listen(process.env.PORT || 5000);\r\n"]}